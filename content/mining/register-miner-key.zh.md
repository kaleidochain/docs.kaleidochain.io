---
title: "注册挖矿凭证"
date: 2019-05-23T17:47:37+08:00
weight: 2
---

要使minerkey可以挖矿，还需要有投票权。这需要使用自己的账户，调用矿工合约`0x1000000000000000000000000000000000000002`，将自己的矿工账户与挖矿凭证关联起来。这相当于将自己持有的token对应的投票权，委托给了这个minerkey。minerkey只有被委托后，才会具有一定的投票权，才能在挖矿中使用。

注册矿工本质上是一次合约调用，有两种方式：
1. 通过钱包注册
2. 通过命令行注册

### 使用钱包注册（推荐）

在钱包中，用你的账户，向测试链发送一笔交易，接收地址为矿工合约地址`0x1000000000000000000000000000000000000002`，data填写为上面生成的`minerkey`内容即可。在某些钱包客户端中，交易页面默认没有Data字段，需要在设置中打开。

注册一次需要的gas费用大约在`200000`左右，建议填写gas费用为`210000`，或者在类似MetaMask的客户端中，选择Fastest来发送。gas太少会导致交易执行失败。

### 使用命令行注册

使用命令行向矿工合约地址`0x1000000000000000000000000000000000000002`发送一笔交易，将data字段填写为上面生成的minerkey即可。

```bash
docker exec -it kalnode geth --testnet attach
> myaddr = '0x958DE277Cde7f5808a910dBf6f7854DF52C25833';
> personal.unlockAccount(myaddr, 'your-password');
> hash = eth.sendTransaction({
    from: myaddr, 
    to: '0x1000000000000000000000000000000000000002', 
    gas: 200000, 
    gasPrice: 20000000000, 
    data: 
'0x2c91689a0000000000000000000000001805b7ee5dd340981628b81d5d094c44a027bdc500000000000000000000000000000000000000000000000000000000000000028b259c4c04e61089ce9c0554339fa9dca01f6ef8c7de4f9268add46cd77c6d0fa668a15f6fec02b01d8f37a80a29cf62360aa69b975fa94b23ec6a32d8abf87d3e4c8f41c3c49e6d765aa7449dc510c0cf95a8ba714bd8abecf16e69df9318e200000000000000000000000000000000000000000000000000000000000003e8'
});
> admin.sleepBlocks(2);
> eth.getTransactionReceipt(hash);
```
